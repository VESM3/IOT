
## Tímaverkefni 1 

- Námsmat 15% af heildareinkunn
- ESP32, I2C, SPI, OLED, RFID 

---

#### 1. ESP32-WROOM-32D DevKitC v4 með Arduino IDE. (20%)  
1. Kynntu þér [ESP32](https://lastminuteengineers.com/getting-started-with-esp32/) ásamt [ESP32 Pinout útskýringum](https://lastminuteengineers.com/esp32-pinout-reference/). Hér er **rétta** [pinout](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/_images/esp32-devkitC-v4-pinout.png) á ESP32 sem við erum með.
1. Fylgdu [Installing ESP32 Board in the Arduino IDE](https://lastminuteengineers.com/esp32-arduino-ide-tutorial/) leiðbeiningum, hér er [CP210 driver](https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers) sem þú þarft að sækja.
1. Láttu [LED blikka með ESP32](https://docs.espressif.com/projects/arduino-esp32/en/latest/tutorials/blink.html).
   - veldu **ESP32 DEV Module** í Tools -> Board í Arduino IDE. 
   - GPIO 6 til 11 (D0, D1, D2, D3, CMD, CLK) eru ekki hægt að nota sem GPIO pinnar.
   - svarta snúran er eingöngu power snúra. Notaðu blá USB mircro data kapalsnúru 
   - þú gætir þurft að breyta upload speed í 115200
   - Stundum þarf að halda inni Boot takka meðan forrit er hlaðið.
1. Notaðu [touch](https://lastminuteengineers.com/esp32-basics-capacitive-touch-pins/) með vír til að kveikja og slökkva á LED.

> ESP32 notast við 3.3V logic levels fyrir samskipti. Það er ekki hægt að vinna með íhluti sem krefjast 5V logic. <br>
ESP32-Wroom-32D [datasheet](https://www.espressif.com/sites/default/files/documentation/esp32-wroom-32d_esp32-wroom-32u_datasheet_en.pdf) <br> 

<!-- 
[Mac Guide](https://www.hackster.io/shahizat005/getting-started-with-esp32-on-a-mac-4b3997#toc-installing-esp32-add-on-in-arduino-ide-4)

[ESP32-DevKitC V4 Getting Started Guide](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/hw-reference/esp32/get-started-devkitc.html#esp32-devkitc-v4-getting-started-guide)

[Installing using Arduino IDE](https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html#installing-using-arduino-ide) 
-->

---

#### 2. OLED (20%)

1. Kynntu þér [I2C](https://www.circuitbasics.com/basics-of-the-i2c-communication-protocol/) samskipti. 
1. Lestu [Interface OLED with ESP32](https://lastminuteengineers.com/oled-display-esp32-tutorial/).
1. Birtu nafnið þitt ásamt völdu bitmap icon á OLED (ekki Marilyn Monroe).

OLED | Pinni
--- | ---
S | SDA
S | SCL
G | GND 
V | Vcc 

<!-- [Adafruit_SSD1306](https://github.com/adafruit/Adafruit_SSD1306) -->

---

#### 3. RFID (20%)

1. Kynntu þér [SPI](https://www.circuitbasics.com/basics-of-the-spi-communication-protocol) samskipti ([myndband](https://www.youtube.com/watch?v=ldRkXTBw9_o)). 
1. Lestu þig til um [RC522 RFID](https://lastminuteengineers.com/how-rfid-works-rc522-arduino-tutorial/). 
1. Tengdu RC522 RFID við ESP32 á brauðbretti. Finndu út ID á RFID tagi, sjá [víratengingar og kóða](https://esp32io.com/tutorials/esp32-rfid-nfc). 
1. Tengdu tvö LEDS (rautt og grænt) og RFID tags með RC522 til að auðkenna notanda, sjá [myndband](https://youtu.be/GX_4IAHJzBE) og [kóðadæmi](https://github.com/VESM3/IOT/blob/main/Kodi/RFID_audkenning.ino).

:warning:  Tengdu VCC í 3.3V (ekki 5V) annars skemmur þú RFID

RFID | ESP32
--- | ---
SS | GPIO 5
SCK | GPIO 18
MOSI | GPIO 23
MISO | GPIO 19
IRQ | 
GND | GND
RST | GPIO 27
VCC | **3.3V**


> Nánar um [RFID og NFC](https://github.com/VESM3/IOT/wiki/RFID-og-NFC) <br>

<!--
Skrifaðu nafnið þitt á RFID tag með RC522 RFID. Notaðu lesaðgerð og birtu nafnið í Serial monitor.
fjarlægðu eftirfarandi kóða í les/skrif aðgerðum: `Serial.println(mfrc522.GetStatusCodeName(status));`
-->

---

#### 4. Að fá dagsetningu og rauntíma frá NTP (Network Time Protocol) vefþjóni með ESP32 (10%)

Birtu tíma og dagsetningu ( dagur, mánuður, ár ) í Serial Monitor miðað við Ísland, sjá [Getting Time From NTP Server With ESP32](https://lastminuteengineers.com/esp32-ntp-server-date-time-tutorial/).

```C++
   ssid     = "TskoliVESM";           
   password = "Fallegurhestur";
```
> Notaðu hotspot í síma ef skólanet virkar ekki.

---

#### 5. Tímaskráningarkerfi  (30%)

1. Settu upp verklega með ESP32 og brauðbretti; OLED, RFID og tvö LEDs (rautt og grænt). 
1. Búðu til tvo notendur og skrifaðu nöfnin á sitthvort RFID tagið, [sýnidæmi](https://lastminuteengineers.com/how-rfid-works-rc522-arduino-tutorial/#arduino-code-writing-an-rfid-tag)
1. notaðu `id` af RFID tag fyrir auðkenningu. Þegar notandi skráir sig inn þá verður tímaskráning, nafn birtist á OLED og grænt LED logar. Þegar notandi skráir sig út þá á að birtast á OLED nafn og viðverutíminn ( frá innskráningu ) og rautt LED logar. 
 
<!--
Demo:
- [Toggle LED with NFC Tag and PIN](https://www.hackster.io/wesee/toggle-led-with-nfc-tag-and-pin-57f894)
- [Build your own Raspberry Pi RFID Attendance System](https://pimylifeup.com/raspberry-pi-rfid-attendance-system/)
- [Attendance System Using Raspberry Pi and NFC Tag Reader](https://www.instructables.com/id/Attendance-system-using-Raspberry-Pi-and-NFC-Tag-r/).
-->

---


### Námsmat og skil

- Yfirferð á sér stað í tíma. 
- Fyrir hvern lið: Fullt fyrir fullnægjandi útfærslu, hálft ef lausn er ábótavant og ekkert ef lausn er stórlega ábótavant eða vantar.
- Skilaðu á Innu kóðalausnum.

