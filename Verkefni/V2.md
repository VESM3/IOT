## Tímaverkefni 2 

- Námsmat 15% af heildareinkunn.
- Vefþjónn, HTTP Clients, IFTTT, sleep mode. 

**TODO** gæti tekið meira en 1 viku
---

#### 1. ESP32 sem vefþjónn. (20%)

Kynntu þér helstu aðgerðir með [Wi-Fi](https://randomnerdtutorials.com/esp32-useful-wi-fi-functions-arduino/) safninu. Fylgdu svo eftir báðum sýnidæmum í [Create A Simple ESP32 Web Server In Arduino IDE](https://lastminuteengineers.com/creating-esp32-web-server-arduino-ide/).

1. [Access Point (AP) mode:](https://lastminuteengineers.com/creating-esp32-web-server-arduino-ide/#iconfiguring-the-esp32-web-server-in-access-point-ap-mode) ESP32 er vefþjónn með eigið local wifi netkerfi þar sem allt að 5 nálægð Wifi tæki (t.d sími, tölva, annar ESP32) geta tengst beint (200 metrar).
   - breyttu **ssid** svo það verða ekki conflict á milli ESP32 tækja í stofunni.
   - síminn þinn eða tölva þarf að vera á sama wifi og ESP32.  
   - local IP talan er 192.168.1.1
   - til að tengjast wifi í síma þarf stundum líka að slökkva á mobile nettenginu.
1. [Station (STA) mode:](https://lastminuteengineers.com/creating-esp32-web-server-arduino-ide/#configuring-the-esp32-web-server-in-wifi-station-sta-mode) ESP32 er notaður sem vefþjónn tengdur við tilbúið wifi netkerfi (router), notar IP addressu frá router.
   - passa að hafa baud rate stillt á 115.200 og muna að ýta á reset á ESP32 til að fá IP töluna.   
   - síminn þinn eða tölva þarf að vera á sama wifi og ESP32.  
   - Það á ekki að vera autt space í ssid eða password. 
   - `ssid = "TskoliVESM" og password = "Fallegurhestur"`

---

#### 2. ESP32 vefþjónn með DHT11 hita- og rakamælir (20%)

Settu upp með ESP32 og [DHT11](https://lastminuteengineers.com/dht11-module-arduino-tutorial/) (G tengist í GND, V í 5V og S í digital pinna) og fylgdu [Interface DHT11 with ESP32 & Display Values Using Web Server](https://lastminuteengineers.com/esp32-dht11-dht22-web-server-tutorial/) með DHTlib library frá frá Adafruit. Birtu raka- og hitastig í Serial Monitor og láttu vefsíðuna endurræsa sig á 5 sekúndna fresti (auto page refresh).

---

#### 3. ESP-NOW  (30%) 

Vantar verkefni hér sem tæklar öll möguleg samskipti.

---

#### 4. Gróðurhús  (30%) 

1. Settu upp útiveðurmælir með ESP32 og DHT11 sem kannar hita- og rakastig og sendir gögn  frá sér á 10 sekúndna fresti. ESP32 er með batterí sem aflgjafa, útfærðu lausn til að spara sem mest rafmagnið (sleep mode).
1. Settu upp annan ESP32 sem vefþjón (tengdur tilbúnu Wifi) sem fær gildin frá hinum ESP32 (útiveðurmælir) og birtir á vefsíðu. 
1. Sendu tilkynningu með IFTT Webhooks þegar ákveðin skilyrði eru uppfyllt; það er hlýtt (ákv. hitastig náð) og engin rigning (ákv. rakastig náð). 

Bjargir:
- Kóðadæmi með ESP32 [HTTP Client](https://github.com/VESM3/IOT/blob/main/Kodi/ESP32_Client.ino) sem kveikir á led á ESP32 [Server AP mode](https://github.com/VESM3/IOT/blob/main/Kodi/ESP32_Server_APmode.ino) (þarf að hreinsa til kóða).
- [Communication between two ESP32 via WiFi](https://www.aranacorp.com/en/communication-between-two-esp32-via-wifi/)
- ESP32 getur haft Access point (AP) og station (STA) á sama tíma, þessi stilling (dual mode) kallast `WIFI_AP_STA`, [sýnidæmi](https://linuxhint.com/esp32-both-access-station-points/#:~:text=The%20above%20two%20modes%20access,network%20to%20which%20ESP32%20connects). 

---

### Námsmat og skil

- Skilaðu á Innu kóðalausnum.
- Yfirferð á sér stað í tíma. Einkunn fyrir hvern lið: 
    - 4/4 lausn er vel útfærð.
    - 3/4 lausn er smávægilega ábótavant (vantar smá upp á).
    - 2/4 lausn er ábótavant, helmingur er vel útfærður.
    - 1/4 lausn er stórlega ábótavant, en tíma- og kóðavinna lögð í lausn.
    - 0/4 lausn vantar eða óunnin.


